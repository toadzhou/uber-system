### 报价管理

* 数据库架构

![avatar](/images/baojia-jiagou.png)

* 逻辑梳理
```text
1. 先建立甲方公司
2. 根据公司信息建立项目，并初始化房间，公区个数
3. 设置基于房间的模版(eg: 海宁-100平米房间模版)
4. 在模版建立的前提下，上传基本商品的信息
5. 在模版操作页面绑定商品信息
6. 公区按照3,4,5逻辑同样进行构建
7. 根据项目进行导出功能excel,pdf
```

```text
图片->商品->模版->(房间或公区)->项目
```

* 任务计划
```text
1. 插件的curd
2. 模版的curd
3. 模版绑定插件功能
4. 模版解除插件功能
5. 项目的curd
6. 项目初始化组件（房间 或 公区）
7. 组件根据模版 生成初始化数据
8. 组件的修改功能
9. 项目导出excel功能

```

* 数据库设计
```mysql
CREATE TABLE `bl_company` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL COMMENT '公司名称',
  `status` int(11) DEFAULT NULL COMMENT '状态: 0-无效 1-有效',
  `phone` varchar(50) DEFAULT NULL COMMENT '电话',
  `address` varchar(255) DEFAULT NULL COMMENT '地址',
  `latitude` varchar(120) DEFAULT NULL COMMENT '经度',
  `longitude` varchar(120) DEFAULT NULL COMMENT '纬度',
  `owner_name` varchar(255) DEFAULT NULL COMMENT '负责人姓名',
  `create_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '创建人',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '更新人',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4;


CREATE TABLE `bl_picture_unit` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL COMMENT '图片名称',
  `url_path` varchar(600) DEFAULT NULL COMMENT '图片地址',
  `status` int(11) DEFAULT '0' COMMENT '状态: 0-失效 1-有效',
  `width` int(11) DEFAULT NULL COMMENT '长度',
  `height` int(11) DEFAULT NULL COMMENT '宽度',
  `create_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '创建人',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '更新人',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4;


CREATE TABLE `bl_project_info` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL COMMENT '项目名称',
  `company_id` bigint(20) DEFAULT NULL COMMENT '所属公司ID',
  `status` int(11) DEFAULT NULL COMMENT '状态: 0-待处理 1-进行中 2-已完成',
  `budget` int(11) DEFAULT NULL COMMENT '甲方预算(单位: 分)',
  `dead_line` date DEFAULT NULL COMMENT '截至日期',
  `remark` varchar(255) DEFAULT NULL COMMENT '备注',
  `create_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '创建人',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '更新人',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;



CREATE TABLE `bl_template_info` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL COMMENT '模板名称',
  `width` int(11) DEFAULT NULL COMMENT '长度',
  `height` int(11) DEFAULT NULL COMMENT '宽度',
  `price` bigint(20) DEFAULT NULL COMMENT '价格(单位: 分)',
  `unit` int(11) DEFAULT '1' COMMENT '计量单位(1: 件 2:套)',
  `remark` varchar(255) DEFAULT NULL COMMENT '备注',
  `status` int(11) DEFAULT '0' COMMENT '状态: 0-无效 1-有效',
  `create_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '创建人',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '更新人',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COMMENT='模板信息 ';

CREATE TABLE `bl_template_image` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `template_id` bigint(20) DEFAULT NULL COMMENT '所属模版Id',
  `image_id` bigint(20) DEFAULT NULL COMMENT '图片Id',
  `create_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '创建人',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_person` varchar(64) NOT NULL DEFAULT 'system' COMMENT '更新人',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4;

```

